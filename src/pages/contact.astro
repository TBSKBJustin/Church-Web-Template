---
import Layout from '../layouts/Layout.astro';
---

<Layout title="聯絡我們 - 教會名稱">
  <main>
    <div class="page-header" style="background: url('/images/contact-bg.jpg') center/cover;">
      <div class="container">
        <h1>聯絡我們</h1>
        <p>歡迎與我們聯繫</p>
      </div>
    </div>

    <section class="contact-section">
      <div class="container">
        <div class="contact-grid">
          <!-- 聯絡資訊 -->
          <div class="contact-info">
            <h2>聯絡資訊</h2>
            
            <div class="info-item">
              <div>
                <h3>地址</h3>
                <p>[您的教會地址]</p>
              </div>
            </div>

            <div class="info-item">
              <div>
                <h3>電子郵件</h3>
                <p>[church@example.com]</p>
              </div>
            </div>

            <div class="info-item">
              <div>
                <h3>辦公時間</h3>
                <p>請填寫您的辦公時間</p>
              </div>
            </div>

            <div class="social-links">
              <h3>社群媒體</h3>
              <div class="social-icons">
                <a href="#" target="_blank" rel="noopener noreferrer" aria-label="YouTube">YouTube</a>
                <a href="#" target="_blank" rel="noopener noreferrer" aria-label="Facebook">Facebook</a>
              </div>
            </div>
          </div>

          <!-- 聯絡表單 -->
          <div class="contact-form">
            <h2>發送訊息</h2>
            <form>
              <div class="form-group">
                <label for="name">姓名 *</label>
                <input type="text" id="name" name="name" required />
              </div>

              <div class="form-group">
                <label for="email">電子郵件 *</label>
                <input type="email" id="email" name="email" required />
              </div>

              <div class="form-group">
                <label for="phone">電話</label>
                <input type="tel" id="phone" name="phone" />
              </div>

              <div class="form-group">
                <label for="subject">主旨 *</label>
                <input type="text" id="subject" name="subject" required />
              </div>

              <div class="form-group">
                <label for="message">訊息 *</label>
                <textarea id="message" name="message" rows="6" required></textarea>
              </div>

              <button type="submit" class="btn-submit">發送訊息</button>
            </form>
            <p class="form-note">* 為必填欄位</p>
          </div>
        </div>
      </div>
    </section>
  </main>
</Layout>

<style>
  .page-header {
    color: white;
    padding: 8rem 2rem;
    text-align: center;
    position: relative;
  }

  .page-header h1 {
    font-size: 3rem;
    margin: 0 0 0.5rem 0;
    text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.7);
  }

  .page-header p {
    font-size: 1.25rem;
    opacity: 0.95;
    text-shadow: 2px 2px 6px rgba(0, 0, 0, 0.7);
  }

  .contact-section {
    padding: 4rem 2rem;
  }

  .container {
    max-width: 1200px;
    margin: 0 auto;
  }

  .contact-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
    gap: 4rem;
  }

  .contact-info h2,
  .contact-form h2 {
    color: var(--color-accent);
    margin-bottom: 2rem;
  }

  .info-item {
    display: flex;
    gap: 1rem;
    margin-bottom: 2rem;
  }

  .info-item .icon {
    font-size: 2rem;
  }

  .info-item h3 {
    color: var(--color-text-main);
    margin-bottom: 0.5rem;
  }

  .info-item p {
    color: var(--color-text-muted);
    line-height: 1.6;
  }

  .social-links {
    margin-top: 3rem;
  }

  .social-links h3 {
    color: var(--color-text-main);
    margin-bottom: 1rem;
  }

  .social-icons {
    display: flex;
    gap: 1rem;
  }

  .social-icons a {
    padding: 0.5rem 1rem;
    background: var(--color-accent);
    color: white;
    text-decoration: none;
    border-radius: 6px;
    transition: background 0.3s;
  }

  .social-icons a:hover {
    background: var(--color-accent-hover);
  }

  .form-group {
    margin-bottom: 1.5rem;
  }

  .form-group label {
    display: block;
    margin-bottom: 0.5rem;
    color: var(--color-text-main);
    font-weight: 600;
  }

  .form-group input,
  .form-group textarea {
    width: 100%;
    padding: 0.75rem;
    border: 1px solid var(--color-border);
    border-radius: 6px;
    font-family: inherit;
    font-size: 1rem;
  }

  .form-group input:focus,
  .form-group textarea:focus {
    outline: none;
    border-color: var(--color-accent);
  }

  .btn-submit {
    width: 100%;
    padding: 1rem;
    background: var(--color-accent);
    color: white;
    border: none;
    border-radius: 6px;
    font-size: 1.1rem;
    font-weight: 600;
    cursor: pointer;
    transition: background 0.3s;
  }

  .btn-submit:hover {
    background: var(--color-accent-hover);
  }

  .form-note {
    margin-top: 1rem;
    color: var(--color-text-muted);
    font-size: 0.875rem;
  }

  @media (max-width: 768px) {
    .contact-grid {
      grid-template-columns: 1fr;
    }
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const form = document.querySelector('form') as HTMLFormElement;
    const submitBtn = form?.querySelector('.btn-submit') as HTMLButtonElement;
    
    form?.addEventListener('submit', async (e: Event) => {
      e.preventDefault();
      
      if (!submitBtn) return;
      
      // 获取表单数据
      const formData = new FormData(form);
      const data = {
        name: formData.get('name'),
        email: formData.get('email'),
        phone: formData.get('phone') || '',
        subject: formData.get('subject'),
        message: formData.get('message')
      };
      
      // 禁用按钮并显示加载状态
      submitBtn.disabled = true;
      const originalText = submitBtn.textContent;
      submitBtn.textContent = '發送中...';
      
      try {
        // 使用 mailto 作为默认方式
        const subject = encodeURIComponent(`[網站詢問] ${data.subject}`);
        const body = encodeURIComponent(
          `姓名: ${data.name}\n` +
          `Email: ${data.email}\n` +
          `電話: ${data.phone}\n\n` +
          `訊息:\n${data.message}`
        );
        
        window.location.href = `mailto:church@example.com?subject=${subject}&body=${body}`;
        
        // 显示成功消息
        alert('謝謝您的訊息！我們會盡快回覆您。');
        
        // 重置表单
        form.reset();
      } catch (error) {
        console.error('Error:', error);
        alert('發送失敗，請稍後再試。');
      } finally {
        // 恢复按钮状态
        submitBtn.disabled = false;
        submitBtn.textContent = originalText;
      }
    });
  });
</script>
