---
import Layout from '../layouts/Layout.astro';
import { getCollection } from 'astro:content';

// 获取最新贴文
const allPosts = await getCollection('posts');
const latestPosts = allPosts
  .sort((a, b) => b.data.publishDate.valueOf() - a.data.publishDate.valueOf())
  .slice(0, 3);
---

<Layout title="首頁 - 教會名稱">
  <main>
    <!-- Hero Section -->
    <section class="hero">
      <div class="container">
        <h1>歡迎來到我們的教會</h1>
        <p class="tagline">在此添加您教會的簡短描述</p>
        <div class="cta-buttons">
          <a href="/about" class="btn btn-primary">認識我們</a>
          <a href="/gathering" class="btn btn-secondary">聚會資訊</a>
        </div>
      </div>
    </section>

    <!-- 參與聚會 Section -->
    <section class="welcome-section">
      <div class="container">
        <h2>參與聚會</h2>
        <div class="welcome-content">
          <p>
            歡迎您來到我們的教會。我們是一個傳講主耶穌基督和學習上帝話語的地方，我們相信為我們被釘十架和復活了的耶穌有改變人生命的大能，藉著祂我們能經歷上帝的大愛。聖經說，這愛「是過於人所能測度的」，藉著信靠主耶穌的心，我們便能親身體會。
          </p>
          <div class="welcome-cta">
            <a href="/gathering" class="btn btn-primary">查看聚會時間</a>
            <a href="/contact" class="btn btn-outline">聯絡我們</a>
          </div>
        </div>
      </div>
    </section>

    <!-- Latest Posts Section -->
    <section class="latest-posts">
      <div class="container">
        <h2>最新消息</h2>
        <div class="posts-grid">
          {latestPosts.map((post) => (
            <article class="post-card">
              {post.data.thumbnail && (
                <img src={post.data.thumbnail} alt={post.data.title} />
              )}
              <div class="post-content">
                <h3><a href={`/posts/${post.slug}`}>{post.data.title}</a></h3>
                <time datetime={post.data.publishDate.toISOString()}>
                  {post.data.publishDate.toLocaleDateString('zh-TW')}
                </time>
                <p>{post.data.excerpt || ''}</p>
              </div>
            </article>
          ))}
        </div>
        <div class="view-all">
          <a href="/posts" class="btn btn-outline">查看所有貼文</a>
        </div>
      </div>
    </section>

    <!-- 我們的團隊 Section -->
    <section class="team-section">
      <div class="container">
        <h2>我們的團隊</h2>
        <p class="section-subtitle">同工團隊</p>
        <div class="team-grid">
          <div class="team-member">
            <div class="member-photo">
              <img src="/images/team/placeholder.jpg" alt="主任牧師" />
            </div>
            <h3>主任牧師名稱</h3>
            <p class="role">主任牧師</p>
            <p class="bio">在此添加牧師的簡介和事工經歷。</p>
          </div>
          <div class="team-member">
            <div class="member-photo">
              <img src="/images/team/placeholder.jpg" alt="同工" />
            </div>
            <h3>同工名稱</h3>
            <p class="role">事工職位</p>
            <p class="bio">在此添加同工的簡介和事工經歷。</p>
          </div>
          <div class="team-member">
            <div class="member-photo">
              <img src="/images/team/placeholder.jpg" alt="長老" />
            </div>
            <h3>長老名稱</h3>
            <p class="role">長老</p>
            <p class="bio">在此添加長老的簡介和事工經歷。</p>
          </div>
        </div>
        <div class="view-all">
          <a href="/team" class="btn btn-outline">認識更多團隊成員</a>
        </div>
      </div>
    </section>

    <!-- Info Section -->
    <section class="info-section">
      <div class="container">
        <div class="info-grid">
          <div class="info-card">
            <h3>主日敬拜</h3>
            <p>每週日上午 9:30 - 10:45</p>
            <a href="/gathering">了解更多</a>
          </div>
          <div class="info-card">
            <h3>禱告會</h3>
            <p>每週日上午 9:00 - 9:20</p>
            <a href="/gathering">了解更多</a>
          </div>
          <div class="info-card">
            <h3>聯絡我們</h3>
            <p>歡迎隨時與我們聯繫</p>
            <a href="/contact">聯絡方式</a>
          </div>
        </div>
      </div>
    </section>

    <!-- YouTube Actions Section -->
    <section class="youtube-actions">
      <div class="container">
        <h2>觀看我們的聚會</h2>
        <p class="section-description">在 YouTube 上與我們一起敬拜和學習</p>
        <div class="action-buttons">
          <a href="#" target="_blank" class="btn-youtube btn-recordings">
            觀看錄像
          </a>
          <a href="#" target="_blank" class="btn-youtube btn-live">
            觀看直播
          </a>
        </div>
        <p class="youtube-note">請更新這些連結為您教會的 YouTube 頻道</p>
      </div>
    </section>
  </main>
</Layout>

<style>
  .hero {
    background: url('/images/hero-bg.jpg') center/cover;
    color: white;
    padding: 10rem 2rem;
    text-align: center;
    position: relative;
  }

  .hero h1 {
    font-size: 3rem;
    margin-bottom: 1rem;
    text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.6);
  }

  .tagline {
    font-size: 1.5rem;
    margin-bottom: 2rem;
    opacity: 0.95;
    text-shadow: 2px 2px 6px rgba(0, 0, 0, 0.6);
  }

  .cta-buttons {
    display: flex;
    gap: 1rem;
    justify-content: center;
    flex-wrap: wrap;
  }

  .btn {
    padding: 0.75rem 2rem;
    border-radius: 8px;
    text-decoration: none;
    font-weight: 600;
    transition: transform 0.2s;
  }

  .btn:hover {
    transform: translateY(-2px);
  }

  .btn-primary {
    background: white;
    color: var(--color-accent);
  }

  .btn-primary:hover {
    background: var(--color-bg-soft);
  }

  .btn-secondary {
    background: rgba(255, 255, 255, 0.2);
    color: white;
    border: 2px solid white;
  }

  .btn-secondary:hover {
    background: rgba(255, 255, 255, 0.3);
  }

  .btn-outline {
    border: 2px solid var(--color-accent);
    color: var(--color-accent);
    background: transparent;
  }

  .btn-outline:hover {
    background: var(--color-accent);
    color: white;
  }

  .welcome-section {
    padding: 4rem 2rem;
    background: linear-gradient(135deg, var(--color-bg-main) 0%, var(--color-bg-soft) 100%);
  }

  .welcome-content {
    max-width: 900px;
    margin: 0 auto;
    text-align: center;
  }

  .welcome-content p {
    font-size: 1.2rem;
    line-height: 2;
    color: var(--color-text-main);
    margin-bottom: 2rem;
  }

  .welcome-cta {
    display: flex;
    gap: 1rem;
    justify-content: center;
    flex-wrap: wrap;
  }

  .latest-posts, .info-section {
    padding: 4rem 2rem;
  }

  .container {
    max-width: 1200px;
    margin: 0 auto;
  }

  h2 {
    text-align: center;
    font-size: 2.5rem;
    margin-bottom: 3rem;
    color: var(--color-text-main);
  }

  h3 {
    color: var(--color-accent);
  }

  .posts-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 2rem;
    margin-bottom: 2rem;
  }

  .post-card {
    border: 1px solid var(--color-border);
    border-radius: 12px;
    overflow: hidden;
    background: white;
    transition: box-shadow 0.3s;
  }

  .post-card:hover {
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
  }

  .post-card img {
    width: 100%;
    height: 200px;
    object-fit: cover;
  }

  .post-content {
    padding: 1.5rem;
  }

  .post-content h3 {
    margin-bottom: 0.5rem;
  }

  .post-content h3 a {
    color: var(--color-text-main);
    text-decoration: none;
  }

  .post-content h3 a:hover {
    color: var(--color-accent);
  }

  .post-content time {
    font-size: 0.875rem;
    color: var(--color-text-muted);
  }

  .view-all {
    text-align: center;
    margin-top: 3rem;
  }

  .info-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 2rem;
  }

  .info-card {
    text-align: center;
    padding: 2rem;
    background: white;
    border: 1px solid var(--color-border);
    border-radius: 12px;
  }

  .info-card h3 {
    font-size: 1.5rem;
    margin-bottom: 1rem;
  }

  .info-card a {
    color: var(--color-accent);
    text-decoration: none;
    font-weight: 600;
  }

  .info-card a:hover {
    color: var(--color-accent-hover);
  }

  .team-section {
    padding: 4rem 2rem;
    background: var(--color-bg-soft);
  }

  .section-subtitle {
    text-align: center;
    font-size: 1.2rem;
    color: var(--color-text-muted);
    margin-top: -2rem;
    margin-bottom: 3rem;
  }

  .team-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 2rem;
    margin-bottom: 2rem;
  }

  .team-member {
    text-align: center;
    background: white;
    padding: 2rem;
    border-radius: 12px;
    transition: transform 0.3s, box-shadow 0.3s;
  }

  .team-member:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
  }

  .member-photo {
    width: 180px;
    height: 180px;
    margin: 0 auto 1.5rem;
    border-radius: 50%;
    overflow: hidden;
    border: 4px solid var(--color-accent);
  }

  .member-photo img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .team-member h3 {
    font-size: 1.4rem;
    margin-bottom: 0.5rem;
    color: var(--color-text-main);
  }

  .team-member .role {
    color: var(--color-accent);
    font-weight: 600;
    margin-bottom: 1rem;
  }

  .team-member .bio {
    color: var(--color-text-muted);
    line-height: 1.6;
    font-size: 0.95rem;
  }

  /* YouTube Actions Section */
  .youtube-actions {
    padding: 4rem 0;
    background: linear-gradient(135deg, var(--color-accent) 0%, var(--color-accent-hover) 100%);
    text-align: center;
  }

  .youtube-actions h2 {
    color: white;
    font-size: 2.5rem;
    margin-bottom: 1rem;
  }

  .section-description {
    color: rgba(255, 255, 255, 0.95);
    font-size: 1.2rem;
    margin-bottom: 2.5rem;
  }

  .action-buttons {
    display: flex;
    gap: 2rem;
    justify-content: center;
    flex-wrap: wrap;
  }

  .btn-youtube {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 1.25rem 2.5rem;
    border-radius: 50px;
    font-size: 1.2rem;
    font-weight: 700;
    text-decoration: none;
    transition: all 0.3s ease;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
    min-width: 200px;
    justify-content: center;
  }

  .btn-youtube .icon {
    font-size: 1.8rem;
  }

  .btn-recordings {
    background: white;
    color: var(--color-accent);
    border: 2px solid white;
  }

  .btn-recordings:hover {
    background: rgba(255, 255, 255, 0.9);
    transform: translateY(-3px);
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.25);
  }

  .btn-live {
    background: rgba(255, 255, 255, 0.2);
    color: white;
    border: 2px solid white;
  }

  .btn-live:hover {
    background: rgba(255, 255, 255, 0.3);
    transform: translateY(-3px);
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.25);
  }

  @media (max-width: 768px) {
    .youtube-actions h2 {
      font-size: 2rem;
    }

    .action-buttons {
      flex-direction: column;
      align-items: center;
    }

    .btn-youtube {
      width: 100%;
      max-width: 300px;
    }
  }
</style>
